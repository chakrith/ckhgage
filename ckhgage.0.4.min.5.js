function getRandomInt(t,e){return Math.floor(Math.random()*(e-t+1))+t}CkhGage=function(t){if(!t.id)return alert("Missing id parameter forgauge!"),!1;if(!document.getElementById(t.id))return alert('No element with id: "'+t.id+'" found!'),!1;this.a={id:t.id,title:t.title?t.title:"",value:t.value?t.value:80,min:t.min?t.min:0,max:t.max?t.max:100,gage_w_radio:t.gage_w_radio?t.gage_w_radio:20,ro:t.r_arc_out?t.r_arc_out:120,ri:t.r_arc_in?t.r_arc_in:60,line_color:t.line_color?t.line_color:"#3399cc",ty:t.title_font_style?t.title_font_style:"Arial",ts:t.title_font_size?t.title_font_size:"25",tc:t.title_font_color?t.title_font_color:"#000066",fill_gradient_color_start:t.fill_gradient_color_start?t.fill_gradient_color_start:"#00ccff",fill_gradient_color_stop:t.fill_gradient_color_stop?t.fill_gradient_color_stop:"#000066",vy:t.value_font_style?t.value_font_style:"Arial",vs:t.value_font_size?t.value_font_size:"42",vc:t.value_font_color?t.value_font_color:"#000066",value_sign:t.value_sign?t.value_sign:"",label:t.label?t.label:"time/sec",ly:t.label_font_style?t.label_font_style:"Arial",ls:t.label_font_size?t.label_font_size:"16",lc:t.label_font_color?t.label_font_color:"#000066",my:t.minmax_font_style?t.minmax_font_style:"Arial",ms:t.minmax_font_size?t.minmax_font_size:"16",mc:t.minmax_font_color?t.minmax_font_color:"#000066",w:0,h:0,title_font_height:-1,value_font_height:-1},t.value>this.a.max&&(this.a.value=this.a.max),t.value<this.a.min&&(this.a.value=this.a.min),this.originalValue=t.value,this.canvas=document.getElementById(this.a.id),this.a.w=this.canvas.width,this.a.h=this.canvas.height,this.a.cx=this.a.w/2,this.a.cy=85*this.a.h/100;var e=!0;if(t.value&&("False"==t.auto||"false"==t.auto)&&(e=!1),e){this.a.ro=parseInt(.8*this.a.w/2),this.a.ri=parseInt(this.a.ro*(100-this.a.gage_w_radio)/100);var i,a=this.canvas.getContext("2d"),l=2*this.a.ri*6/10;for(i=100;i>8;i--){a.font=i+"px "+this.a.vy;var o=a.measureText(this.a.max+this.a.value_sign).width;if(l>o)break}this.a.vs=i;var r=8*this.a.ri/10;for(i=this.a.vs;i>5;i--){var n=determineFontHeight("font-family:"+this.a.vy+";font-size:"+i+"px;");if(r>n)break}this.a.vs=i;var l=this.a.ro-this.a.ri;for(i=24;i>5;i--){a.font=i+"px "+this.a.my;var o=a.measureText(this.a.max).width;if(l>o)break}this.a.ms=i;var l=2*this.a.ri*6/10;for(i=48;i>5;i--){a.font=i+"px "+this.a.ly;var o=a.measureText(this.a.label).width;if(l>o)break}this.a.ls=i;var r=Math.min(1*this.a.w/10,4*this.a.ri/10);for(i=48;i>5;i--){var n=determineFontHeight("font-family:"+this.a.ty+";font-size:"+i+"px;");if(r>n)break}this.a.ts=i,this.a.title_font_height=determineFontHeight("font-family:"+this.a.ty+";font-size:"+this.a.ts+"px;"),this.a.title_font_height=14*this.a.title_font_height/10,this.a.value_font_height=determineFontHeight("font-family:"+this.a.vy+";font-size:"+this.a.vs+"px;")}},CkhGage.prototype.refresh=function(t){this.ckhgraph(this.canvas,t)},CkhGage.prototype.ckhgraph=function(t,e){var i=this.a,a=t.getContext("2d");a.clearRect(0,0,t.width,t.height);var l=i.max-e;l=-1*l*Math.PI/i.max;var o=i.cx,r=i.cy;if(a.beginPath(),a.font=i.ts+"px "+i.ty,a.textAlign="center",a.textBaseline="top",a.fillStyle=i.tc,a.fillText(i.title,o,r-i.ro-i.title_font_height),a.stroke(),e!=i.min){a.beginPath();var n=a.createLinearGradient(0,0,200,0);n.addColorStop(0,i.fill_gradient_color_start),n.addColorStop(1,i.fill_gradient_color_stop),a.arc(o,r-1,i.ro-1,Math.PI,l),a.fillStyle=n,a.lineTo(o,r-1),a.fill(),a.stroke()}a.fillStyle="#ffffff",a.strokeStyle=i.line_color,a.beginPath(),a.arc(o,r,i.ro,Math.PI,0),a.stroke(),a.beginPath(),a.arc(o,r,i.ri,Math.PI,0),a.fill(),a.stroke(),a.beginPath(),a.moveTo(o-i.ro,r),a.lineTo(o-i.ri,r),a.fillStyle="#000000",a.stroke(),a.beginPath(),a.moveTo(o+i.ri,r),a.lineTo(o+i.ro,r),a.fillStyle="#000000",a.stroke(),a.beginPath(),a.font=i.vs+"px "+i.vy,a.textAlign="center",a.textBaseline="top",a.fillStyle=i.vc,a.fillText(e+i.value_sign,o,r-i.value_font_height),a.stroke(),a.beginPath(),a.font=i.ls+"px "+i.ly,a.textAlign="center",a.textBaseline="buttom",a.fillStyle=i.lc,a.fillText(i.label,o,r-3),a.stroke(),a.beginPath(),a.font=i.ms+"px "+i.my,a.textAlign="center",a.textBaseline="top",a.fillStyle=i.mc,a.fillText(i.min,o-i.ro+(i.ro-i.ri)/2,r+2),a.fillText(i.max,o+i.ro-(i.ro-i.ri)/2,r+2),a.stroke()};var determineFontHeight=function(t){var e=document.getElementsByTagName("body")[0],i=document.createElement("div"),a=document.createTextNode("M");i.appendChild(a),i.setAttribute("style",t),e.appendChild(i);var l=i.offsetHeight;return e.removeChild(i),l};
